<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to sinterval • sinterval</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to sinterval">
<meta property="og:description" content="sinterval">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">sinterval</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/intro.html">Introduction to sinterval</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Introduction to sinterval</h1>
            
      
      
      <div class="hidden name"><code>intro.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="intro">1. Intro<a class="anchor" aria-label="anchor" href="#intro"></a>
</h2>
<p>The <code>sinterval</code> package seeks to emulate the behavior of
<a href="https://mjskay.github.io/tidybayes/" class="external-link">tidybayes</a> and the
possibilities of <a href="https://CRAN.R-project.org/package=arm" class="external-link">arm</a>. for non-Bayesian
models, giving easy access to simulations from fit models in a tidy
format. These simulations can then be used for plotting, via packages
like <a href="https://mjskay.github.io/ggdist/" class="external-link">ggdist</a>, power
analysis, or otherwise.</p>
<p>Let’s take a look at the two core function,
<code><a href="../reference/add_fitted_sims.html">add_fitted_sims()</a></code> and <code><a href="../reference/add_predicted_sims.html">add_predicted_sims()</a></code>
using the <a href="https://allisonhorst.github.io/palmerpenguins/" class="external-link">palmerpenguins</a>
dataset.</p>
<p>Note, these functions are written to be generics, and as such, they
can be written for any class of models and added to this package. To do
so, please fork <a href="https://github.com/jebyrnes/sinterval/" class="external-link">the
package Github repo</a> and <a href="https://github.com/jebyrnes/sinterval/issues" class="external-link">file an issue</a>. I
will take a look, and if approved, you can issue a pull request.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">sinterval</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://allisonhorst.github.io/palmerpenguins/" class="external-link">palmerpenguins</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://mjskay.github.io/ggdist/" class="external-link">ggdist</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="add_fitted_sims">2. add_fitted_sims()<a class="anchor" aria-label="anchor" href="#add_fitted_sims"></a>
</h2>
<p>This function gets fitted simulations from a model incorporating
error in fit. It then merges that with a dataset and its set of
predictors some number of times (the number of simulations). Let’s look
at a model where flipper length is predicted by body mass and
species.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins_filter</span> <span class="op">&lt;-</span> <span class="va">penguins</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"flipper_length_mm"</span>, <span class="st">"body_mass_g"</span>, <span class="st">"species"</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="va">penguins_filter</span> <span class="op">&lt;-</span> <span class="va">penguins_filter</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">penguins_filter</span><span class="op">$</span><span class="va">body_mass_g</span><span class="op">)</span>,<span class="op">]</span></span>
<span></span>
<span><span class="va">mod</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">flipper_length_mm</span> <span class="op">~</span> <span class="va">body_mass_g</span><span class="op">*</span><span class="va">species</span>,</span>
<span>          data <span class="op">=</span> <span class="va">penguins_filter</span><span class="op">)</span></span>
<span></span>
<span><span class="va">fit_sims</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_fitted_sims.html">add_fitted_sims</a></span><span class="op">(</span><span class="va">penguins_filter</span>, <span class="va">mod</span>, n_sims <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span></code></pre></div>
<p>By default, <code>add_fitted_sims</code> does 1000 simulations, but
here we use 100. One can also set a seed for repeatable behavior.
Looking at the data we can see a column with the simulation number and
another with a fit value.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">fit_sims</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 34,200 × 5</span></span></span>
<span><span class="co">#&gt;    flipper_length_mm body_mass_g species .sim  flipper_length_mm_fit</span></span>
<span><span class="co">#&gt;                <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                 <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>               181        <span style="text-decoration: underline;">3</span>750 Adelie  1                      191.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>               181        <span style="text-decoration: underline;">3</span>750 Adelie  2                      190.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>               181        <span style="text-decoration: underline;">3</span>750 Adelie  3                      191.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>               181        <span style="text-decoration: underline;">3</span>750 Adelie  4                      190.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>               181        <span style="text-decoration: underline;">3</span>750 Adelie  5                      190.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>               181        <span style="text-decoration: underline;">3</span>750 Adelie  6                      190.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>               181        <span style="text-decoration: underline;">3</span>750 Adelie  7                      190.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>               181        <span style="text-decoration: underline;">3</span>750 Adelie  8                      190.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>               181        <span style="text-decoration: underline;">3</span>750 Adelie  9                      190.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>               181        <span style="text-decoration: underline;">3</span>750 Adelie  10                     190.</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 34,190 more rows</span></span></span></code></pre></div>
<p>We can then use this to visualize the model fit with simulation!</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">fit_sims</span>,</span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">body_mass_g</span>, </span>
<span>           y <span class="op">=</span> <span class="va">flipper_length_mm_fit</span>, </span>
<span>          color <span class="op">=</span> <span class="va">species</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>group <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">species</span>, <span class="va">.sim</span><span class="op">)</span><span class="op">)</span>,</span>
<span>            alpha <span class="op">=</span> <span class="fl">0.1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">penguins_filter</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">flipper_length_mm</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_classic</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Fit Simulations"</span><span class="op">)</span></span></code></pre></div>
<p><img src="intro_files/figure-html/unnamed-chunk-4-1.png" width="672"></p>
</div>
<div class="section level2">
<h2 id="add_predicted_sims">3. add_predicted_sims()<a class="anchor" aria-label="anchor" href="#add_predicted_sims"></a>
</h2>
<p>This function takes into account the additional prediction error in
the model. When possible, it attempts to also draw on error in the
estimation of the error generating process, as seen in <a href="https://CRAN.R-project.org/package=arm" class="external-link">arm</a> if at all
possible. We can, for example, use this along with <code>ggdist</code>
to visualize prediction error.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">predicted_sims</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/add_predicted_sims.html">add_predicted_sims</a></span><span class="op">(</span><span class="va">penguins_filter</span>, <span class="va">mod</span>, n_sims <span class="op">=</span> <span class="fl">100</span><span class="op">)</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://mjskay.github.io/ggdist/" class="external-link">ggdist</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">predicted_sims</span>,</span>
<span>       <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">body_mass_g</span>, </span>
<span>           y <span class="op">=</span> <span class="va">flipper_length_mm_predict</span>, </span>
<span>          color <span class="op">=</span> <span class="va">species</span>, fill <span class="op">=</span> <span class="va">species</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">penguins_filter</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">flipper_length_mm</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="http://mjskay.github.io/ggdist/reference/stat_lineribbon.html" class="external-link">stat_lineribbon</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">1</span><span class="op">/</span><span class="fl">4</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_classic</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Prediction Intervals"</span><span class="op">)</span></span></code></pre></div>
<p><img src="intro_files/figure-html/unnamed-chunk-5-1.png" width="672"></p>
<p>Note that the column name is also changed to reflect that this is a
prediction.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">predicted_sims</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 34,200 × 5</span></span></span>
<span><span class="co">#&gt;    flipper_length_mm body_mass_g species .sim  flipper_length_mm_predict</span></span>
<span><span class="co">#&gt;                <span style="color: #949494; font-style: italic;">&lt;int&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;fct&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                     <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>               181        <span style="text-decoration: underline;">3</span>750 Adelie  1                          180.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>               181        <span style="text-decoration: underline;">3</span>750 Adelie  2                          198.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>               181        <span style="text-decoration: underline;">3</span>750 Adelie  3                          191.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>               181        <span style="text-decoration: underline;">3</span>750 Adelie  4                          194.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>               181        <span style="text-decoration: underline;">3</span>750 Adelie  5                          193.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>               181        <span style="text-decoration: underline;">3</span>750 Adelie  6                          190.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>               181        <span style="text-decoration: underline;">3</span>750 Adelie  7                          189.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>               181        <span style="text-decoration: underline;">3</span>750 Adelie  8                          184.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>               181        <span style="text-decoration: underline;">3</span>750 Adelie  9                          199.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>               181        <span style="text-decoration: underline;">3</span>750 Adelie  10                         187.</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># … with 34,190 more rows</span></span></span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Jarrett Byrnes.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
